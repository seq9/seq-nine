import{i as e}from"./isarray.52efb23f.js";var r={exports:{}},t=e;r.exports=c,r.exports.parse=o,r.exports.compile=function(e,r){return p(o(e,r),r)},r.exports.tokensToFunction=p,r.exports.tokensToRegExp=s;var n=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,r){for(var t,o=[],i=0,p=0,u="",f=r&&r.delimiter||"/";null!=(t=n.exec(e));){var s=t[0],c=t[1],g=t.index;if(u+=e.slice(p,g),p=g+s.length,c)u+=c[1];else{var h=e[p],x=t[2],v=t[3],d=t[4],m=t[5],w=t[6],E=t[7];u&&(o.push(u),u="");var y=null!=x&&null!=h&&h!==x,R="+"===w||"*"===w,b="?"===w||"*"===w,$=t[2]||f,T=d||m;o.push({name:v||i++,prefix:x||"",delimiter:$,optional:b,repeat:R,partial:y,asterisk:!!E,pattern:T?l(T):E?".*":"[^"+a($)+"]+?"})}}return p<e.length&&(u+=e.substr(p)),u&&o.push(u),o}function i(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function p(e,r){for(var n=new Array(e.length),o=0;o<e.length;o++)"object"==typeof e[o]&&(n[o]=new RegExp("^(?:"+e[o].pattern+")$",f(r)));return function(r,o){for(var p="",a=r||{},l=(o||{}).pretty?i:encodeURIComponent,u=0;u<e.length;u++){var f=e[u];if("string"!=typeof f){var s,c=a[f.name];if(null==c){if(f.optional){f.partial&&(p+=f.prefix);continue}throw new TypeError('Expected "'+f.name+'" to be defined')}if(t(c)){if(!f.repeat)throw new TypeError('Expected "'+f.name+'" to not repeat, but received `'+JSON.stringify(c)+"`");if(0===c.length){if(f.optional)continue;throw new TypeError('Expected "'+f.name+'" to not be empty')}for(var g=0;g<c.length;g++){if(s=l(c[g]),!n[u].test(s))throw new TypeError('Expected all "'+f.name+'" to match "'+f.pattern+'", but received `'+JSON.stringify(s)+"`");p+=(0===g?f.prefix:f.delimiter)+s}}else{if(s=f.asterisk?encodeURI(c).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):l(c),!n[u].test(s))throw new TypeError('Expected "'+f.name+'" to match "'+f.pattern+'", but received "'+s+'"');p+=f.prefix+s}}else p+=f}return p}}function a(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,r){return e.keys=r,e}function f(e){return e&&e.sensitive?"":"i"}function s(e,r,n){t(r)||(n=r||n,r=[]);for(var o=(n=n||{}).strict,i=!1!==n.end,p="",l=0;l<e.length;l++){var s=e[l];if("string"==typeof s)p+=a(s);else{var c=a(s.prefix),g="(?:"+s.pattern+")";r.push(s),s.repeat&&(g+="(?:"+c+g+")*"),p+=g=s.optional?s.partial?c+"("+g+")?":"(?:"+c+"("+g+"))?":c+"("+g+")"}}var h=a(n.delimiter||"/"),x=p.slice(-h.length)===h;return o||(p=(x?p.slice(0,-h.length):p)+"(?:"+h+"(?=$))?"),p+=i?"$":o&&x?"":"(?="+h+"|$)",u(new RegExp("^"+p,f(n)),r)}function c(e,r,n){return t(r)||(n=r||n,r=[]),n=n||{},e instanceof RegExp?function(e,r){var t=e.source.match(/\((?!\?)/g);if(t)for(var n=0;n<t.length;n++)r.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,r)}(e,r):t(e)?function(e,r,t){for(var n=[],o=0;o<e.length;o++)n.push(c(e[o],r,t).source);return u(new RegExp("(?:"+n.join("|")+")",f(t)),r)}(e,r,n):function(e,r,t){return s(o(e,t),r,t)}(e,r,n)}var g=r.exports;export{g as p};
