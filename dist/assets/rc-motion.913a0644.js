import{h as e,f as n,e as t,i as r,a as o,b as a,c as i,d as u,l as c,_ as s}from"./@babel.37ebccc5.js";import{r as f}from"./react.58d4b6d6.js";import{d as v,b as p,f as l,e as d}from"./rc-util.f76c03bd.js";import{c as m}from"./classnames.ca41f454.js";function y(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit".concat(e)]="webkit".concat(n),t["Moz".concat(e)]="moz".concat(n),t["ms".concat(e)]="MS".concat(n),t["O".concat(e)]="o".concat(n.toLowerCase()),t}var E,k,h,x=(E=v(),k="undefined"!=typeof window?window:{},h={animationend:y("Animation","AnimationEnd"),transitionend:y("Transition","TransitionEnd")},E&&("AnimationEvent"in k||delete h.animationend.animation,"TransitionEvent"in k||delete h.transitionend.transition),h),b={};if(v()){var L=document.createElement("div");b=L.style}var A={};function C(e){if(A[e])return A[e];var n=x[e];if(n)for(var t=Object.keys(n),r=t.length,o=0;o<r;o+=1){var a=t[o];if(Object.prototype.hasOwnProperty.call(n,a)&&a in b)return A[e]=n[a],A[e]}return""}var g=C("animationend"),R=C("transitionend"),S=!(!g||!R),w=g||"animationend",j=R||"transitionend";function P(n,t){return n?"object"===e(n)?n[t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(n,"-").concat(t):null}function N(e){var t=f.exports.useRef(!1),r=f.exports.useState(e),o=n(r,2),a=o[0],i=o[1];return f.exports.useEffect((function(){return function(){t.current=!0}}),[]),[a,function(e){t.current||i(e)}]}var O=v()?f.exports.useLayoutEffect:f.exports.useEffect,T=["prepare","start","active","end"];function M(e){return"active"===e||"end"===e}var V=function(e,t){var r=f.exports.useState("none"),o=n(r,2),a=o[0],i=o[1],u=function(){var e=f.exports.useRef(null);function n(){p.cancel(e.current)}return f.exports.useEffect((function(){return function(){n()}}),[]),[function t(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;n();var a=p((function(){o<=1?r({isCanceled:function(){return a!==e.current}}):t(r,o-1)}));e.current=a},n]}(),c=n(u,2),s=c[0],v=c[1];return O((function(){if("none"!==a&&"end"!==a){var e=T.indexOf(a),n=T[e+1],r=t(a);false===r?i(n):s((function(e){function t(){e.isCanceled()||i(n)}!0===r?t():Promise.resolve(r).then(t)}))}}),[e,a]),f.exports.useEffect((function(){return function(){v()}}),[]),[function(){i("prepare")},a]};function D(e,o,a,i){var u=i.motionEnter,c=void 0===u||u,s=i.motionAppear,v=void 0===s||s,p=i.motionLeave,l=void 0===p||p,d=i.motionDeadline,m=i.motionLeaveImmediately,y=i.onAppearPrepare,E=i.onEnterPrepare,k=i.onLeavePrepare,h=i.onAppearStart,x=i.onEnterStart,b=i.onLeaveStart,L=i.onAppearActive,A=i.onEnterActive,C=i.onLeaveActive,g=i.onAppearEnd,R=i.onEnterEnd,S=i.onLeaveEnd,P=i.onVisibleChanged,T=N(),D=n(T,2),z=D[0],F=D[1],I=N("none"),K=n(I,2),U=K[0],W=K[1],_=N(null),q=n(_,2),B=q[0],G=q[1],H=f.exports.useRef(!1),J=f.exports.useRef(null),Q=f.exports.useRef(!1),X=f.exports.useRef(null);function Y(){return a()||X.current}var Z=f.exports.useRef(!1);function $(e){var n,t=Y();e&&!e.deadline&&e.target!==t||("appear"===U&&Z.current?n=null==g?void 0:g(t,e):"enter"===U&&Z.current?n=null==R?void 0:R(t,e):"leave"===U&&Z.current&&(n=null==S?void 0:S(t,e)),!1===n||Q.current||(W("none"),G(null)))}var ee=function(e){var n=f.exports.useRef(),t=f.exports.useRef(e);t.current=e;var r=f.exports.useCallback((function(e){t.current(e)}),[]);function o(e){e&&(e.removeEventListener(j,r),e.removeEventListener(w,r))}return f.exports.useEffect((function(){return function(){o(n.current)}}),[]),[function(e){n.current&&n.current!==e&&o(n.current),e&&e!==n.current&&(e.addEventListener(j,r),e.addEventListener(w,r),n.current=e)},o]}($),ne=n(ee,1)[0],te=f.exports.useMemo((function(){var e,n,r;switch(U){case"appear":return t(e={},"prepare",y),t(e,"start",h),t(e,"active",L),e;case"enter":return t(n={},"prepare",E),t(n,"start",x),t(n,"active",A),n;case"leave":return t(r={},"prepare",k),t(r,"start",b),t(r,"active",C),r;default:return{}}}),[U]),re=V(U,(function(e){if("prepare"===e){var n=te.prepare;return!!n&&n(Y())}var t;ie in te&&G((null===(t=te[ie])||void 0===t?void 0:t.call(te,Y(),null))||null);return"active"===ie&&(ne(Y()),d>0&&(clearTimeout(J.current),J.current=setTimeout((function(){$({deadline:!0})}),d))),true})),oe=n(re,2),ae=oe[0],ie=oe[1],ue=M(ie);Z.current=ue,O((function(){F(o);var n,t=H.current;(H.current=!0,e)&&(!t&&o&&v&&(n="appear"),t&&o&&c&&(n="enter"),(t&&!o&&l||!t&&m&&!o&&l)&&(n="leave"),n&&(W(n),ae()))}),[o]),f.exports.useEffect((function(){("appear"===U&&!v||"enter"===U&&!c||"leave"===U&&!l)&&W("none")}),[v,c,l]),f.exports.useEffect((function(){return function(){clearTimeout(J.current),Q.current=!0}}),[]),f.exports.useEffect((function(){void 0!==z&&"none"===U&&(null==P||P(z))}),[z,U]);var ce=B;return te.prepare&&"start"===ie&&(ce=r({transition:"none"},ce)),[U,ie,ce,null!=z?z:o]}var z=function(e){o(t,e);var n=a(t);function t(){return i(this,t),n.apply(this,arguments)}return u(t,[{key:"render",value:function(){return this.props.children}}]),t}(f.exports.Component);var F=function(o){var a=o;function i(e){return!(!e.motionName||!a)}"object"===e(o)&&(a=o.transitionSupport);var u=f.exports.forwardRef((function(e,o){var a=e.visible,u=void 0===a||a,c=e.removeOnLeave,s=void 0===c||c,v=e.forceRender,p=e.children,y=e.motionName,E=e.leavedClassName,k=e.eventProps,h=i(e),x=f.exports.useRef(),b=f.exports.useRef();var L=D(h,u,(function(){try{return d(x.current||b.current)}catch(e){return null}}),e),A=n(L,4),C=A[0],g=A[1],R=A[2],S=A[3],w=f.exports.useRef(S);S&&(w.current=!0);var j=f.exports.useRef(o);j.current=o;var N,O=f.exports.useCallback((function(e){x.current=e,l(j.current,e)}),[]),T=r(r({},k),{},{visible:u});if(p)if("none"!==C&&i(e)){var V,F;"prepare"===g?F="prepare":M(g)?F="active":"start"===g&&(F="start"),N=p(r(r({},T),{},{className:m(P(y,C),(V={},t(V,P(y,"".concat(C,"-").concat(F)),F),t(V,y,"string"==typeof y),V)),style:R}),O)}else N=S?p(r({},T),O):!s&&w.current?p(r(r({},T),{},{className:E}),O):v?p(r(r({},T),{},{style:{display:"none"}}),O):null;else N=null;return f.exports.createElement(z,{ref:b},N)}));return u.displayName="CSSMotion",u}(S);function I(n){var t;return t=n&&"object"===e(n)&&"key"in n?n:{key:n},r(r({},t),{},{key:String(t.key)})}function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(I)}function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=[],o=0,a=n.length,i=K(e),u=K(n);i.forEach((function(e){for(var n=!1,i=o;i<a;i+=1){var c=u[i];if(c.key===e.key){o<i&&(t=t.concat(u.slice(o,i).map((function(e){return r(r({},e),{},{status:"add"})}))),o=i),t.push(r(r({},c),{},{status:"keep"})),o+=1,n=!0;break}}n||t.push(r(r({},e),{},{status:"remove"}))})),o<a&&(t=t.concat(u.slice(o).map((function(e){return r(r({},e),{},{status:"add"})}))));var c={};t.forEach((function(e){var n=e.key;c[n]=(c[n]||0)+1}));var s=Object.keys(c).filter((function(e){return c[e]>1}));return s.forEach((function(e){(t=t.filter((function(n){var t=n.key,r=n.status;return t!==e||"remove"!==r}))).forEach((function(n){n.key===e&&(n.status="keep")}))})),t}var W=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];var _=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F,t=function(e){o(v,e);var t=a(v);function v(){var e;return i(this,v),(e=t.apply(this,arguments)).state={keyEntities:[]},e.removeKey=function(n){e.setState((function(e){return{keyEntities:e.keyEntities.map((function(e){return e.key!==n?e:r(r({},e),{},{status:"removed"})}))}}))},e}return u(v,[{key:"render",value:function(){var e=this,t=this.state.keyEntities,r=this.props,o=r.component,a=r.children,i=r.onVisibleChanged,u=c(r,["component","children","onVisibleChanged"]),v=o||f.exports.Fragment,p={};return W.forEach((function(e){p[e]=u[e],delete u[e]})),delete u.keys,f.exports.createElement(v,u,t.map((function(t){var r=t.status,o=c(t,["status"]),u="add"===r||"keep"===r;return f.exports.createElement(n,s({},p,{key:o.key,visible:u,eventProps:o,onVisibleChanged:function(n){null==i||i(n,{key:o.key}),n||e.removeKey(o.key)}}),a)})))}}],[{key:"getDerivedStateFromProps",value:function(e,n){var t=e.keys,r=n.keyEntities,o=K(t);return{keyEntities:U(r,o).filter((function(e){var n=r.find((function(n){var t=n.key;return e.key===t}));return!n||"removed"!==n.status||"remove"!==e.status}))}}}]),v}(f.exports.Component);return t.defaultProps={component:"div"},t}(S);export{F as C,_ as a};
